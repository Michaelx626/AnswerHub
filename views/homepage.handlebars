{{> profile-navigation}}
<!-- Content Area -->
<div class="container mt-3">
  <div class="row">
    <!-- Left Column -->
    <div class="col-md-4 col">
      <div class="profile-card">
        <div class="custom-card-header">
          <h5 class="pt-2 px-2">Profile</h5>
        </div>
        <div class="card-body d-flex flex-column p-2 m-2">
          {{#if users.profilePic}}
          <img src='/uploads/{{users.profilePic}}' alt="Profile Picture" class="img-fluid rounded-circle mb-3 align-self-center" width='150px' height='150px'>
          {{/if}}
          <h4 class='align-self-start'>{{users.name}}</h4>
          <a class="text-muted align-self-start" href="mailto:{{users.email}}">{{users.email}}</a>
          <ul class="align-self-start list-unstyled">
            <div class='profile-bio'>
              {{#if users.userBio}}
              <p id="userBio">{{users.userBio}}</p>
              {{else}}
              <p>Update your profile to add a profile picture or profile bio!</p>
              {{/if}}
            </div>
            <a href='/airesponse'><li><i class='fa-brands fa-bilibili'></i>AI Assistant</li></a>
          </ul>
        </div>
      </div>
    </div>

    <!-- Middle Column -->
    <div class="col-md-8">
      <div class="profile-card">
        <div class="card-header">
          <h5>What's happening?</h5>
        </div>
        <div class="card-body">
          <form>
            <div class="form-group">
              <textarea class="form-control" id="user_inputbox" placeholder="Write something..." rows="3"></textarea>
              <button type="submit" class="btn btn-primary post_btn m-2">Post</button>
            </div>
          </form>
        </div>
      </div>

    {{#each posts as |post|}}
    <article class='profile-card'>
      <div class='card-body'>
        <div class='row d-flex align-items-center'>
          <div class='col-sm-3 p-2 m-1 d-flex flex-column' id='user-info'>
            {{#if post.user.profilePic}}
              <img
                src='/uploads/{{post.user.profilePic}}'
                class='rounded-circle align-self-center'
                alt='{{post.user.name}} profile picture'
                width='50'
                height='50'
              />
            {{/if}}
            <p class='post_user align-self-center'>{{post.user.name}}</p>
            <p class='post_date align-self-center'>{{format_date post.date_created}}</p>
          </div>
          <div class='col-sm-8 p-2 m-1 d-flex flex-column' id='contents'>
            <p class='post_content align-self-center'>{{post.content}}</p>
          </div>
        </div>
        <div class='col-sm-12 m-1'>
          <a href='/post/{{post.id}}'><i class='far fa-comment'></i>
            {{#if post.comments.length}}
              {{#with post.comments}}
                {{post.comments.length}}
              {{/with}}
            {{else}}
              0
            {{/if}}
          </a>
        </div>
      </div>
    </article>
    {{/each}}
  </div>
</div>

<script src="./js/post.js"></script>